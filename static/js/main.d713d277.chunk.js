(this.webpackJsonpbloggers=this.webpackJsonpbloggers||[]).push([[0],{228:function(e,t,n){},416:function(e,t,n){"use strict";n.r(t);var r=n(19),c=n(7),a=n.n(c),s=n(102),i=n.n(s),o=(n(228),n(1)),l=n(3),j=n(10),b=n(11),u=n(20),d=n(13),h=n(4),O=n(21),p=n(0),f=n.n(p),m=n(2),x=n(14),g=n(29),v=n(76),N=n(106),C=(n(417),{apiKey:"AIzaSyCPEwX0_A5th2D-dwsUqtfbkNFYf7Gz658",authDomain:"bloggerplan-fb3f9.firebaseapp.com",projectId:"bloggerplan-fb3f9",storageBucket:"bloggerplan-fb3f9.appspot.com",messagingSenderId:"171533959490",appId:"1:171533959490:web:c844462a40a35fcca308db",measurementId:"G-1RHSGKKEG8"});N.a.initializeApp(C),N.a.firestore().settings({timestampsInSnapshots:!0,merge:!0});var S=N.a,y=function(){return function(e){var t=Object(x.b)();Object(x.c)(t,(function(t){e(t?{type:"LOGIN_SUCCESS"}:{type:"SIGNOUT_SUCCESS"})}))}};y();var E={authError:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(r.a)(Object(r.a)({},e),{},{authError:"LOGIN FAILED"});case"LOGIN_SUCCESS":return console.log("Login sucess!!!"),Object(r.a)({},e);case"SIGNOUT_SUCCESS":return console.log("Sign out success"),{state:e};case"SIGNUP_SUCCESS":return console.log("Sign UP success"),Object(r.a)(Object(r.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("Sign UP success"),Object(r.a)(Object(r.a)({},e),{},{authError:t.err.message});default:return e}},U=n(6),F=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){var n=Object(x.b)().currentUser;n?window.location.href="/project":e.props.signIN(e.state),t.preventDefault(),n&&(window.location.href="/")},e}return Object(l.a)(n,[{key:"render",value:function(){Object(x.b)().currentUser;var e=this.props.authError;return Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(U.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign in"}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Email"}),Object(U.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"password",children:"Password"}),Object(U.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Login"}),Object(U.jsx)("div",{className:"red-text center",children:e?Object(U.jsx)("p",{children:e}):null})]})]})})}}]),n}(c.Component),R=Object(O.b)((function(e){return{authError:e.auth.authError}}),(function(e){return{signIN:function(t){return e((n=t,function(e,t,r){r.getFirebase;var c=Object(x.b)();Object(x.d)(c,n.email,n.password).then((function(t){console.log(t.user),e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var n},signned:function(){return e(y())}}}))(F),I=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:"",firstName:"",lastname:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.authError;return Object(x.b)().currentUser?Object(U.jsx)(d.a,{to:"/"}):Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(U.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Email"}),Object(U.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"password",children:"Password"}),Object(U.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"firstname",children:"First Name"}),Object(U.jsx)("input",{type:"text",id:"firstname",onChange:this.handleChange})]}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"lastname",children:"Last Name"}),Object(U.jsx)("input",{type:"text",id:"lastname",onChange:this.handleChange})]}),Object(U.jsx)("div",{className:"input-field",children:Object(U.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Sign Up"})}),Object(U.jsx)("div",{className:"red-text center",children:e?Object(U.jsxs)("p",{children:[" ",e," "]}):null})]})})}}]),n}(c.Component),P=Object(O.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){var t=Object(x.b)(),n=Object(v.a)(C),r=Object(g.c)(n);return function(){var n=Object(m.a)(f.a.mark((function n(c){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=e.firstname,Object(x.a)(t,e.email,e.password).then(function(){var t=Object(m.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(g.d)(Object(g.a)(r,"users",n.user.uid),{firstName:a,lastName:e.lastname,initials:e.firstname[0]+e.lastname[0]}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){c({type:"SIGNUP_SUCCESS"})})).catch((function(e){c({type:"SIGNUP_ERROR",err:e})}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t))}}}))(I),k=n(104),L=n.n(k),_=n(36),G=function(e){var t=e.project;Object(x.b)();return Object(U.jsx)("div",{className:"card z-depth-0 project-summary",children:Object(U.jsxs)("div",{className:"card content grey-text text-darken-5",children:[Object(U.jsxs)("span",{className:"card-title",children:["\xa0",t.title]}),Object(U.jsxs)("p",{children:["\xa0  Posted By ",t.authorFirstName," ",t.authorLastName]}),Object(U.jsxs)("p",{className:"grey-text",children:[" \xa0  ",L()(t.createdAt.toDate()).calendar()]})]})})},A=function(e){var t=e.projects;return Object(U.jsx)("div",{className:"project-list section",children:t&&t.map((function(e){return Object(U.jsx)(u.b,{to:"/project/"+e.id,children:Object(U.jsx)(G,{project:e})},e.id)}))})},T=n(37),D=n(15),z=a.a.createContext(),J=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(D.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(!0),o=Object(D.a)(i,2),l=o[0],j=o[1],b=Object(x.b)();b.currentUser;return Object(c.useEffect)((function(){Object(x.c)(b,(function(e){s(e),j(!1),Object(x.b)().currentUser&&d.a}))}),[]),l?Object(U.jsx)(U.Fragment,{children:"Loading..."}):Object(U.jsx)(z.Provider,{value:{currentUser:a},children:t})},B=Object(O.b)(null,(function(e){return{signOUT:function(){return e(function(){var e=Object(x.b)();return function(t){Object(x.e)(e).then((function(){t({type:"SIGNOUT_SUCESS"})})).catch((function(e){console.log(e)}))}}())}}}))((function(e){return Object(U.jsxs)("ul",{className:"right",children:[Object(U.jsx)("li",{children:Object(U.jsx)(u.c,{to:"/create",children:"New Project"})}),Object(U.jsx)("li",{children:Object(U.jsx)("a",{onClick:e.signOUT,href:"/",children:"Log Out"})}),Object(U.jsx)("li",{children:Object(U.jsx)(u.c,{to:"/",className:"btn btn-floating pink lighten-1",children:e.profile})})]})})),K=function(){return Object(U.jsxs)("ul",{className:"right",children:[Object(U.jsx)("li",{children:Object(U.jsx)(u.c,{to:"/signup",children:"SignUp"})}),Object(U.jsx)("li",{children:Object(U.jsx)(u.c,{to:"/signin",children:"Login"})})]})},q=Object(O.b)((function(e){return console.log(e),{auth:e.auth,profile:e.firebase.profile}}))((function(e){e.profile;var t=Object(x.b)(),n=Object(c.useContext)(z).currentUser,r=t.currentUser,a=n?Object(U.jsx)(B,{profile:r.email[0]}):Object(U.jsx)(K,{});return console.log(t),Object(U.jsx)("nav",{className:"nav-wrapper grey darken-4",children:Object(U.jsxs)("div",{className:"container",children:[Object(U.jsx)(u.b,{to:"/",className:"brand-logo",children:"Blogger"}),a]})})})),H=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(x.b)(),t=this.props.projects;return e.currentUser?Object(U.jsx)("div",{className:"dashboard container",children:Object(U.jsx)("div",{className:"row",children:Object(U.jsxs)("div",{className:"col s12 m6",children:[Object(U.jsx)(A,{projects:t})," "]})})}):Object(U.jsx)(d.a,{to:"/signin"})}}]),n}(c.Component),M=Object(T.c)(Object(O.b)((function(e){return console.log(e),{projects:e.firestore.ordered.projects,auth:e.firebase.auth}})),Object(_.firestoreConnect)([{collection:"projects"}]))(H),X=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={title:"",content:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state),e.props.createProject(e.state)},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.b)().currentUser?Object(U.jsx)("div",{className:"container",children:Object(U.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(U.jsx)("h5",{className:"grey-text text-darken-3",children:"Create Project"}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"title",children:"Title"}),Object(U.jsx)("input",{type:"text",id:"title",onChange:this.handleChange})]}),Object(U.jsxs)("div",{className:"input-field",children:[Object(U.jsx)("label",{htmlFor:"content",children:"Content"}),Object(U.jsx)("textarea",{id:"content",cols:"30",rows:"10",className:"materialize-textarea",onChange:this.handleChange})]}),Object(U.jsx)("div",{className:"input-field",children:Object(U.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})}):Object(U.jsx)(d.a,{to:"/signin"})}}]),n}(c.Component),Y=Object(O.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createProject:function(t){return e(function(e){return function(){var t=Object(m.a)(f.a.mark((function t(n,c,a){var s,i,o,l,j,b,u,d;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getFirebase,i=Object(x.b)(),o=i.currentUser,l=Object(v.a)(C),j=Object(g.c)(l),b=Object(g.a)(j,"users",o.uid),t.next=8,Object(g.b)(b);case 8:u=t.sent,d=u.data(),console.log("projects detail"),console.log(d),s().firestore().collection("projects").add(Object(r.a)(Object(r.a)({},e),{},{authorFirstName:d.firstName,authorLastName:d.lastName,authorId:o.uid,createdAt:new Date})).then((function(){n({type:"CREATE_PROJECT",project:e})})).catch((function(e){n({type:"CREATE_PROJECT_ERROR",error:e})}));case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}(t))}}}))(X),Q=Object(T.c)(Object(O.b)((function(e){return{projects:e.firestore.ordered.projects}})),Object(_.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.projects,n=Object(d.h)().id;if(!Object(x.b)().currentUser)return Object(U.jsx)(d.a,{to:"/signin"});if(t){var r=t.find((function(e){return e.id===n}));return console.log("project"),console.log(r),Object(U.jsx)("div",{className:"container section project-details",children:Object(U.jsxs)("div",{className:"card z-depth-0",children:[Object(U.jsxs)("div",{className:"card-content",children:[Object(U.jsxs)("span",{className:"card-title",children:[r.title," "]}),Object(U.jsxs)("p",{children:[" ",r.content]})]}),Object(U.jsxs)("div",{className:"card-action  lighten-4 grey-text",children:[Object(U.jsxs)("div",{children:["Posted by ",r.authorFirstName," ",r.authorLastName]}),Object(U.jsxs)("div",{children:[" ",L()(r.createdAt.toDate()).calendar().toString()]})]})]})})}return Object(U.jsx)("div",{className:"container-center",children:Object(U.jsx)("p",{children:"Loading Project.."})})})),V=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(U.jsx)(J,{children:Object(U.jsx)(u.a,{children:Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(q,{}),Object(U.jsxs)(d.d,{children:[Object(U.jsx)(d.b,{exact:!0,path:"/",element:Object(U.jsx)(M,{})}),Object(U.jsx)(d.b,{path:"/project/:id",element:Object(U.jsx)(Q,{})}),Object(U.jsx)(d.b,{path:"/signin",element:Object(U.jsx)(R,{})}),Object(U.jsx)(d.b,{path:"/signup",element:Object(U.jsx)(P,{})}),Object(U.jsx)(d.b,{path:"/create",element:Object(U.jsx)(Y,{})})]})]})})})}}]),n}(c.Component),W=Object(O.b)(null,(function(e){return{signned:function(){return e(y())}}}))(V),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,418)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},$={projects:[{id:"1",title:"help me find peach",content:"blah blah blah"},{id:"2",title:"collect all the stars",content:"blah blah blah"},{id:"3",title:"egg hunt with yoshi",content:"blah blah blah"}]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("Create project",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("Create project error",t.err),e;default:return e}},te=n(62),ne=Object(T.b)({auth:w,project:ee,firestore:te.firestoreReducer,firebase:_.firebaseReducer}),re=n(223),ce=(Object(x.b)(),[re.a.withExtraArgument({getFirebase:_.getFirebase,getFirestore:te.getFirestore})]),ae=Object(T.d)(ne,Object(T.c)(T.a.apply(void 0,ce),Object(te.reduxFirestore)(S,C))),se={firebase:S,config:Object(r.a)(Object(r.a)({},C),{},{userProfile:"users",useFirestoreForProfile:!0}),dispatch:ae.dispatch,createFirestoreInstance:te.createFirestoreInstance};i.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(O.a,{store:ae,children:Object(U.jsx)(_.ReactReduxFirebaseProvider,Object(r.a)(Object(r.a)({},se),{},{children:Object(U.jsx)(W,{})}))})}),document.getElementById("root")),Z()}},[[416,1,2]]]);
//# sourceMappingURL=main.d713d277.chunk.js.map